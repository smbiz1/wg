Create a key pair using Amazon EC2

When you create a key pair using Amazon EC2, the public key is stored in Amazon EC2, and you store the private key.

You can create up to 5,000 key pairs per Region. 

aws ec2 create-key-pair \
    --key-name my-key-pair \
    --key-type rsa \
    --key-format pem \
    --query "KeyMaterial" \
    --output text > my-key-pair.pem

If you plan to use an SSH client on a macOS or Linux computer to connect to your Linux instance, use the following command to set the permissions of your private key file so that only you can read it.

chmod 400 key-pair-name.pem
# If you do not set these permissions, then you cannot connect to your instance using this key pair. For more information, see Error: Unprotected private key file.


Create a key pair using a third-party tool and import the public key to Amazon EC2

Instead of using Amazon EC2 to create a key pair, you can create an RSA or ED25519 key pair by using a third-party tool and then import the public key to Amazon EC2.

Requirements for key pairs
Supported types:

(Linux and Windows) RSA

(Linux only) ED25519

Note
ED25519 keys are not supported for Windows instances.

Supported formats:

OpenSSH public key format (for Linux, the format in ~/.ssh/authorized_keys)

(Linux only) If you connect using SSH while using the EC2 Instance Connect API, the SSH2 format is also supported.

SSH private key file format must be PEM or PPK

(RSA only) Base64 encoded DER format

(RSA only) SSH public key file format as specified in RFC 4716

Supported lengths:

1024, 2048, and 4096.

(Linux only) If you connect using SSH while using the EC2 Instance Connect API, the supported lengths are 2048 and 4096.


# To create a key pair using a third-party tool
Generate a key pair with a third-party tool of your choice. For example, you can use ssh-keygen (a tool provided with the standard OpenSSH installation). 

Alternatively, Java, Ruby, Python, and many other programming languages provide standard libraries that you can use to create a key pair.

# The private key must be in the PEM or PPK format. 

For example, use ssh-keygen -m PEM to generate the OpenSSH key in the PEM format.

# 1. Save the public key to a local file. 
For example, ~/.ssh/my-key-pair.pub (Linux, macOS) or C:\keys\my-key-pair.pub (Windows). The file name extension for this file is not important.

# 2. Save the private key to a local file that has the .pem or .ppk extension. For example, ~/.ssh/my-key-pair.pem or ~/.ssh/my-key-pair.ppk (Linux, macOS). 
# The file extension is important because, depending on the tool you use to connect to your instance, you'll need a specific file format. OpenSSH requires a .pem file, while PuTTY requires a .ppk file.

Important
Save the private key file in a safe place. You'll need to provide the name of your public key when you launch an instance, and the corresponding private key each time you connect to the instance.


# To import the public key to Amazon EC2
Use the import-key-pair command.


aws ec2 import-key-pair \
    --key-name my-key-pair \
    --public-key-material fileb://path/my-key-pair.pub
To verify that the key pair was imported successfully
Use the describe-key-pairs command.


aws ec2 describe-key-pairs --key-names my-key-pair
View related pages Abstracts generated by AI



https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/create-key-pairs.html#how-to-generate-your-own-key-and-import-it-to-aws
